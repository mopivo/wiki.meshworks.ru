# Contributing to MeshWorks Wiki

Спасибо, что помогаете развивать MeshWorks Wiki! Этот документ объясняет, как быстро внести правки в контент и что нужно проверить перед Pull Request.

## 1. Выберите способ правки

### Через интерфейс GitHub (самый простой)
1. Откройте нужную страницу на https://wiki.meshworks.ru и нажмите **Edit this page** *(кнопка появляется после синхронизации с репозиторием)*.
2. GitHub подставит исходный файл и предложит создать ветку с Pull Request.
3. Заполните описание изменений и убедитесь, что чеклист из PR-template отмечен.

### Локально
1. Клонируйте репозиторий и установите зависимости:
   ```bash
   npm ci
   npm start
   ```
2. Работайте в новой ветке (`feature/my-topic`).
3. Проверяйте изменения на http://localhost:3000/.
4. Перед пушем выполните `npm run check`.

## 2. Требования к контенту
- **Шапка страницы (front matter)**: в начале каждого файла есть блок между `---`. В нём минимум такие поля:
  ```yaml
  ---
  title: Название вверху страницы
  slug: /путь/в/адресной/строке
  sidebar_label: Как элемент называется в меню
  sidebar_position: Порядок в меню (число, например 3)
  ---
  ```
- **Структура**: `docs/<section>/<page>.mdx`. Используйте осмысленные директории (`devices/ready-made/portable.md` и т.д.).
- **Язык**: русcкий, единый стиль (повествовательный, без жаргона).
- **Фишки (admonitions)**: можно вставлять цветные блоки, чтобы выделить мысль:
  ```markdown
  :::tip
  Подсказка или полезный совет.
  :::

  :::favorite
  Для важных сообщений, например предупреждения о партнёрских ссылках или особых условиях.
  :::
  ```
  Аналогично работают `:::info`, `:::warning`, `:::note` и т.д.

### Изображения
- Кладите файлы в `static/img/<topic>/` и ссылайтесь как `![alt](/img/<topic>/image.png)`.
- Используйте web-friendly размеры (ширина ≤ 1600px) и сжимайте PNG/JPG перед коммитом.
- Если заменяете изображение, убедитесь, что оно не переиспользуется в других страницах (`rg -l filename.png`).

### Ссылки и код
- Внешние ссылки лучше открывать в новой вкладке: `<a href="..." target="_blank" rel="noreferrer noopener">`. Если не хочется писать HTML, используйте компонент `Link` из Docusaurus.
- Названия команд и файлов обрамляем обратными кавычками (символ `` ` `` рядом с клавишей `Esc`). Пример: `` `meshtastic --help` ``.
- Длинные примеры оформляем тройными кавычками с указанием языка:
  ````
  ```bash
  meshtastic --help
  ```
  ````

## 3. Проверки перед Pull Request
- `npm run check` (линт + build) успешно завершился.
- Новые изображения лежат в `static/img/...` и упомянуты в git.
- Указаны slug/labels, нет GUID или автогенерируемых ссылок.
- Ссылки проверены вручную, особенно на внешний контент.
- В PR-описании перечислены ключевые изменения.

## 4. Шаблоны задач и PR
- Хочется новую страницу или раздел? Создайте Issue по шаблону **Page request**.
- Для багов (опечатка, 404, дубли) используйте шаблон **Wiki bug report**.
- PR‑шаблон содержит чеклист (build, изображения, front matter) — отметьте всё, что сделали.

## 5. Деплой (для Maintainers)
1. Убедитесь, что PR смержен в `main`.
2. Откройте Actions → **Deploy wiki** → **Run workflow** (обычно достаточно значения `main`).
3. Дождитесь завершения workflow (он синхронизирует репозиторий и перезапускает сайт). Логи доступны в GitHub Actions.
4. Проверьте `https://wiki.meshworks.ru/?cacheBust=$(date +%s)` и сделайте визуальный осмотр ключевых страниц.

Если нужны дополнительные автоматизации (шаблоны для новых страниц, генераторы front matter и т.д.), создайте Issue с описанием идеи.
